<div fxLayout="column" fxLayoutAlign="center center" fxFill>
  <div fxFlex="80" fxFlexFill fxLayout="column" fxLayoutAlign="center center">
    <div fxHide.sm class="margin-bottom" id="mini-margin-bottom">
      <mat-icon class="crown" svgIcon="crown"></mat-icon>
    </div>

    <div class="table-container mat-elevation-z4">
      <table mat-table [dataSource]="dataSource">
        <!-- Rank Column -->
        <ng-container matColumnDef="rank">
          <th mat-header-cell *matHeaderCellDef>
            <h4>Rank</h4>
          </th>
          <td
            mat-cell
            *matCellDef="let element; let i = index"
            [ngClass]="{ you: element.id === user.id }"
          >
            <p>{{ element.rank }}</p>
          </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            <h4>Name</h4>
          </th>
          <td
            mat-cell
            *matCellDef="let element"
            [ngClass]="{ you: element.id === user.id }"
          >
            <p>{{ element.name }}</p>
          </td>
        </ng-container>

        <!-- #Wins Column -->
        <ng-container matColumnDef="totalMatchWon">
          <th mat-header-cell *matHeaderCellDef>
            <h4>#Wins</h4>
          </th>
          <td
            mat-cell
            *matCellDef="let element"
            [ngClass]="{ you: element.id === user.id }"
          >
            <p>
              {{ element.totalMatchWon }}
            </p>
            <p></p>
          </td>
        </ng-container>

        <!-- Winrate Column -->
        <ng-container matColumnDef="winrate">
          <th mat-header-cell *matHeaderCellDef>
            <h4>Win rate</h4>
          </th>
          <td
            mat-cell
            *matCellDef="let element"
            [ngClass]="{ you: element.id === user.id }"
          >
            <p [ngPlural]="element.gamePlayed.length">
              <ng-template ngPluralCase="=0">0</ng-template>
              <ng-template ngPluralCase="other">
                {{
                  element.totalMatchWon / element.gamePlayed.length | percent
                }}</ng-template
              >
            </p>
            <p></p>
          </td>
        </ng-container>
        <tr
          mat-header-row
          *matHeaderRowDef="
            ['rank', 'name', 'totalMatchWon', 'winrate'];
            sticky: true
          "
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: ['rank', 'name', 'totalMatchWon', 'winrate']"
        ></tr>
      </table>
    </div>
  </div>

  <div fxFlex="20" fxLayout="row" fxLayoutAlign="center start">
    <button mat-icon-button [routerLink]="'/home'" matTooltip="Back">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>
</div>

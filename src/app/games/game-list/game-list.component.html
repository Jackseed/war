<div fxLayout="row" fxLayoutAlign="end center">
  <button mat-icon-button (click)="auth.signOut()">
    <mat-icon>power_settings_new</mat-icon>
  </button>
</div>

<div
  fxLayout="row"
  fxFill
  fxLayoutAlign="space-evenly stretch"
  style="padding-top: 10%;"
>
  <div fxFlex="20">
    <app-profile></app-profile>
  </div>
  <div fxLayout="column">
    <div fxFlex *ngIf="(playerGames$ | async).length">
      <h2 style="text-align: left;">Your current games</h2>
      <div *ngFor="let playerGame of playerGames$ | async">
        <button
          mat-flat-button
          color="warn"
          (click)="joinGame(playerGame)"
          class="game-list"
        >
          <span>{{ playerGame.name }} {{ playerGame.playerIds.length }}/2</span>
        </button>
      </div>
    </div>
    <div fxFlex>
      <app-game-form></app-game-form>
    </div>
  </div>
  <div>
    <div fxFlex *ngIf="(otherGames$ | async).length">
      <h2>Join a game</h2>

      <div class="table-container mat-elevation-z4">
        <table
          mat-table
          [dataSource]="otherGames$ | async"
        >
          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef><h4>Name</h4></th>
            <td mat-cell *matCellDef="let element">
              <p>{{ element.name }}</p>
            </td>
          </ng-container>

          <!-- Players Column -->
          <ng-container matColumnDef="players">
            <th mat-header-cell *matHeaderCellDef><h4>#Players</h4></th>
            <td mat-cell *matCellDef="let element">
              <p>{{ element.playerIds.length }}/2</p>
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="['name', 'players']; sticky: true"
          ></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: ['name', 'players']"
            (click)="joinGame(row)"
            class="row-hover"
          ></tr>
        </table>
      </div>
    </div>
  </div>
</div>

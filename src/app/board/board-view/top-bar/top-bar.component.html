<div
  fxFlexFill
  *ngIf="
    (game$ | async)?.status === ('battle' || 'finished') &&
      !mediaObserver.isActive('lt-lg');
    else classicTopBar
  "
>
  <div fxLayout="column" fxLayoutAlign="center" fxFlexFill>
    <div fxLayout="row" fxFlex="20" fxLayoutAlign="end center">
      <button class="rules-button" mat-stroked-button (click)="openDialog()">
        Rules
      </button>
      <button
        class="power-button"
        mat-icon-button
        (click)="authService.signOut()"
      >
        <mat-icon>power_settings_new</mat-icon>
      </button>
    </div>
    <div fxFlex="80" fxLayout="row" fxLayoutAlign="center end" fxFlexFill>
      <div fxFlexFill fxFlexOffset="5" fxFlex="30">
        <app-message-board fxFlexFill></app-message-board>
      </div>
      <div fxFlexOffset="9.5" fxFlex="nogrow">
        <h1><a routerLink="/home">WAR</a></h1>
      </div>
      <div *ngIf="!mediaObserver.isActive('xs')" fxFlex="50"></div>
    </div>
  </div>
</div>

<ng-template #classicTopBar>
  <div fxLayout="column" fxLayoutAlign="center" fxFlexFill>
    <div fxLayout="row" fxFlex="20" fxLayoutAlign="end center">
      <button class="rules-button" mat-stroked-button (click)="openDialog()">
        Rules
      </button>
      <button
        class="power-button"
        mat-icon-button
        (click)="authService.signOut()"
      >
        <mat-icon>power_settings_new</mat-icon>
      </button>
    </div>
    <div fxFlex="80" fxLayout="row" fxLayoutAlign="center end" fxFlexFill>
      <h1 class="war"><a routerLink="/home">WAR</a></h1>
    </div>
  </div>
</ng-template>
